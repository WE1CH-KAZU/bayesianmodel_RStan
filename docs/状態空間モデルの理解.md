# 状態空間モデルの使いどころ
* 時系列データで、1月2月3月4月6月9月といったように、データが欠損しているとみなせる時に使える
* 言い方を変えれば、データ粒度が月単位しかない時に、週単位ベースでテーブルを作る時に使える？

# 状態空間モデルとは
## 基本形
* alpha_t ~ f(alpha_t | alpha_t-1)        (5.1)
* y_t ~ g(y_t|alpha_t)                    (5.2)

(5.1)は状態方程式、または状態モデル、またはシステムモデルと呼ばれる   
(5.2)は観測方程式、または観測も出る   

alphaは1つ前の状態に基づいて関数fで生成されるパラメータで、  
そのalphaに基づいて関数gで生成される観測値y_t   
という風になっているモデルを考える　　

例えば、「前日の気温が高かったら、今日の気温も高い」というモデルを考えたとき
それが様々なパラメータ（alpha）の隠れたパラメータによって左右されている
と考えるモデル構造になっている


関数f, gは正規分布かもしれないし、ポアソン分布や指数分布かもしれない　　
はたまた確率分布の混合モデルかもしれない

## 欠損値の補間
基本思想が分かると、補間の考え方も出来るようになる
つまり、時間tが欠損している場合、時間t-1からモデルによってy_tを生成し、
その結果を基にt+1を推定する


## 動的線形モデル
状態方程式も、観測方程式も共に正規分布に従うと仮定するモデルの場合、
つまり線形な構造のみであるモデル**線形ガウス状態空間モデル** あるいは
**動的線形モデル** (Dynamic Linear Model: DLM)と呼ぶ

行列表現として
α_t = T_t * α_t-1 + R_t * ε_t, ε~ Normal(0, Q_t)
Y_t = Z_t * α_t + ε_t, ε ~ Normal(0, H_t)

T, R, Z, は（おそらく対角行列で）係数が入っている。ゼロまたは1でも式は成り立つ
εはホワイトノイズか...？


## 動的一般化線形モデル（線形非ガウス状態空間モデル）
正規分布以外にも従うこととしたモデルを**動的一般化線形モデル** とよぶ
(Dynamic Generalized Linear Model: DGLM)
DGLMも結局、**リンク関数を変えることで様々なデータにモデルを適用することができる。**


## その他の様々なトピック
* カルマンフィルタ：DLMを推定するMCMCアルゴリズム
* 散漫カルマンフィルタ：状態の初期値に関して散漫初期化を用いる
**これらのカルマンフィルタは状態を推定するためのアルゴリズム** であって
もでるのパラメータ推定は最尤法で推定するのが普通。

* 重点サンプリング：DGLMを推定するアルゴリズム
* 粒子フィルタ：一般化状態空間モデルを推定するアルゴリズム
